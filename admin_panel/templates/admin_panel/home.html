{% extends 'admin_panel/base.html' %}
{% load static %}

{% block title %}Dashboard - SmartSight{% endblock %}

{% block content %}
<style>
    /* Basic Styling and Fonts */
    body {
        font-family: 'Inter', sans-serif;
        /* Kept original light blue background from your code */
        background-color: #8cd8f8;
    }

    /* Welcome Card Styling */
    .welcome-card {
        background-image: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        border: none;
        border-radius: 20px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        padding: 2.5rem;
        transition: transform 0.3s ease;
    }

    .welcome-card:hover {
        transform: translateY(-5px);
    }

    .welcome-card .card-title {
        color: #1565c0;
        font-weight: 700;
        font-size: 1.8rem;
    }

    .welcome-card .lead {
        color: #424242;
        font-size: 1.1rem;
    }

    /* Summary Cards Styling (Unified for 3x2 Grid) */
    .summary-card {
        background-color: #ffffff;
        border: none;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        padding: 2rem;
        text-align: center;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
        /* Ensures all cards in the 3x2 grid are the same height */
        text-decoration: none !important;
        /* Ensure links don't show underlines */
    }

    .summary-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
    }

    .summary-card .icon-circle {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        margin-bottom: 1rem;
        color: #ffffff;
        font-size: 24px;
    }

    .summary-card .icon-blue {
        background-color: #1e88e5;
    }

    .summary-card .icon-yellow {
        background-color: #fdd835;
    }

    .summary-card .icon-green {
        background-color: #43a047;
    }

    .summary-card .icon-purple {
        background-color: #9c27b0;
    }

    /* New color for Doctor Overview */

    /* Count/Status Text for top row cards */
    .summary-card .display-4 {
        font-weight: 800;
        margin-top: 0.5rem;
        margin-bottom: 0;
    }

    /* Title for all cards */
    .summary-card .text-title {
        color: #424242;
        font-weight: 600;
        font-size: 1.1rem;
        margin-top: 1rem;
        margin-bottom: 10px;
    }

    /* Description for Action Cards (bottom row) */
    .summary-card .card-description {
        color: #757575;
        font-size: 0.95rem;
        margin-bottom: 20px;
    }

    /* Call to Action Button Style for Action Cards */
    .summary-card .btn-cta {
        border-radius: 8px;
        font-weight: 600;
        width: 100%;
        /* Full width for consistency */
        padding: 0.5rem 1rem;
    }

    /* Removed original Doctor Overview button and Large card styles to enforce uniformity */

    /* Recent Activity Section Styling - Kept styles but removed the HTML block below */
    .recent-activity-card {
        background-color: #ffffff;
        border: none;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        padding: 2rem;
    }

    .recent-activity-card .card-title {
        color: #1a237e;
        font-weight: 700;
        font-size: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .activity-list-item {
        border: none;
        padding: 1rem 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #f0f4f8;
    }

    .activity-list-item:last-child {
        border-bottom: none;
    }

    .activity-text {
        color: #555;
        font-size: 1rem;
    }

    .activity-date {
        color: #999;
        font-size: 0.85rem;
        white-space: nowrap;
    }

    .badge-pill {
        background-color: #e0e0e0;
        color: #555;
        padding: 0.3em 0.8em;
        border-radius: 50px;
        font-size: 0.75rem;
    }
</style>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">



{# Welcome Card #}
<div class="card p-4 mb-4 welcome-card">
    <h3 class="card-title">Hello Admin!</h3>
    <p class="lead">
        Welcome to your SmartSight Admin Dashboard. Here you can oversee appointment requests and system settings for
        Enhance Vision Optical PH.
    </p>
</div>

{# --- START 3x2 CARD GRID --- #}

{# --- ROW 1: Status Summary (Total Appointments, Pending Appointments, Active Doctors) --- #}
<div class="row g-4 mb-4">

    {# 1. Total Appointments Card #}
    <div class="col-md-4">
        <div class="card summary-card">
            <div class="card-body">
                <div class="icon-circle icon-blue">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <p class="text-title">Total Appointments</p>
                <p class="display-4 fw-bold text-primary">{{ total_appointments }}</p>
            </div>
        </div>
    </div>

    {# 2. Pending Appointments Card #}
    <div class="col-md-4">
        <div class="card summary-card">
            <div class="card-body">
                <div class="icon-circle icon-yellow">
                    <i class="fas fa-hourglass-half"></i>
                </div>
                <p class="text-title">Pending Appointments</p>
                <p class="display-4 fw-bold text-warning">{{ pending_appointments }}</p>
            </div>
        </div>
    </div>

    {# 3. Active Doctors Card #}
    <div class="col-md-4">
        <div class="card summary-card">
            <div class="card-body">
                <div class="icon-circle icon-green">
                    <i class="fas fa-user-doctor"></i>
                </div>
                <p class="text-title">Active Doctors</p>
                <p class="display-4 fw-bold text-success">{{ active_doctors }}</p>
                {# This was originally where the Doctor Overview button was, now it's just the count #}
            </div>
        </div>
    </div>
</div>

{# --- ROW 2: Action Links (Standard, AI Screening, Doctor Overview) --- #}
<div class="row g-4 mb-5">

    {# 4. Standard Appointments Card (Link) #}
    <div class="col-md-4">
        <a href="{% url 'monitor_appointments' %}?filter=without_ai" class="text-decoration-none">
            <div class="card summary-card h-100">
                <div class="card-body d-flex flex-column justify-content-between align-items-center">
                    <div class="icon-circle icon-blue">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <p class="text-title">Standard Appointments</p>
                    <p class="card-description">View all appointments without AI screening.</p>
                    <span class="btn btn-sm btn-primary btn-cta">Go to Appointments <i
                            class="fas fa-arrow-right ms-2"></i></span>
                </div>
            </div>
        </a>
    </div>

    {# 5. AI Screening Appointments Card (Link) #}
    <div class="col-md-4">
        <a href="{% url 'monitor_appointments' %}?filter=with_ai" class="text-decoration-none">
            <div class="card summary-card h-100">
                <div class="card-body d-flex flex-column justify-content-between align-items-center">
                    <div class="icon-circle icon-green">
                        <i class="fas fa-robot"></i>
                    </div>
                    <p class="text-title">AI Screening Appointments</p>
                    <p class="card-description">View appointments that include AI preliminary screening reports.</p>
                    <span class="btn btn-sm btn-success btn-cta">View AI Screenings <i
                            class="fas fa-arrow-right ms-2"></i></span>
                </div>
            </div>
        </a>
    </div>

    {# 6. Doctors Overview Card (Link) - Now a standalone card matching the others #}
    <div class="col-md-4">
        <a href="{% url 'manage_doctors' %}" class="text-decoration-none">
            <div class="card summary-card h-100">
                <div class="card-body d-flex flex-column justify-content-between align-items-center">
                    <div class="icon-circle icon-purple">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <p class="text-title">Doctors Overview</p>
                    <p class="card-description">Access doctor profiles and manage availability schedules.</p>
                    <span class="btn btn-sm btn-primary btn-cta">Manage Doctors <i
                            class="fas fa-arrow-right ms-2"></i></span>
                </div>
            </div>
        </a>
    </div>
</div>

{# --- END 3x2 CARD GRID --- #}

{# Recent Activity section has been removed #}

{% endblock content %}