{% extends "admin_panel/base.html" %}

{% block title %}Users - SmartSight Admin Panel{% endblock %}

{% block extra_css %}
<style>
  .table {
    border-collapse: separate;
    border-spacing: 0 12px;
    width: 100%;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: transparent;
  }

  .table thead th {
    background-color: #1E88E5;
    color: #fff;
    padding: 12px 16px;
    border-radius: 12px;
    font-weight: 600;
    text-align: left;
  }

  .table tbody tr {
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .table tbody tr:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);
  }

  .table tbody td {
    padding: 12px 16px;
    vertical-align: middle;
    border-top: none;
    border-bottom: none;
  }

  .table tbody td:first-child {
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
  }

  .table tbody td:last-child {
    border-top-right-radius: 12px;
    border-bottom-right-radius: 12px;
  }

  .table tbody tr td.text-center {
    font-style: italic;
    color: #777;
  }

  .search-container {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 20px;
  }

  .search-input-group {
    width: 300px;
  }

  .search-input-group .form-control {
    border-radius: 8px 0 0 8px;
    border-right: none;
    background-color: #f0f8ff;
  }

  .search-input-group .input-group-text {
    background-color: #f0f8ff;
    border-radius: 0 8px 8px 0;
    cursor: pointer;
  }

  .btn-action {
    margin-right: 5px;
  }
</style>
{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <a href="{% url 'add_user' %}" class="btn btn-primary">+ Add User</a>
  </div>
  <div class="input-group search-input-group">
    <input type="text" id="searchInput" class="form-control" placeholder="Search users...">
    <span class="input-group-text"><i class="bi bi-search"></i></span>
  </div>
</div>

<div class="table-responsive">
  <table class="table mt-3">
    <thead>
      <tr>
        <th>ID</th>
        <th>Full Name</th>
        <th>Email</th>
        <th>Staff</th>
        <th>Status</th>
        <th>Date Joined</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr>
        <td>{{ user.id }}</td>
        <td>{{ user.get_full_name }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.is_staff|yesno:"Yes,No" }}</td>
        <td>
          {% if user.is_active %}
            <span class="badge bg-success">Active</span>
          {% else %}
            <span class="badge bg-danger">Blocked</span>
          {% endif %}
        </td>
        <td>{{ user.date_joined|date:"M d, Y H:i" }}</td>
        <td>
          {% if user.is_active %}
            <a href="{% url 'block_user' user.id %}" class="btn btn-sm btn-danger">Block</a>
          {% else %}
            <a href="{% url 'unblock_user' user.id %}" class="btn btn-sm btn-success">Unblock</a>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="7" class="text-center">No users found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

{% block extra_js %}
<script>
  // Search functionality
  document.getElementById('searchInput').addEventListener('input', function () {
    let filter = this.value.toLowerCase();
    let rows = document.querySelectorAll('.table tbody tr');
    rows.forEach(row => {
      let text = row.textContent.toLowerCase();
      row.style.display = text.includes(filter) ? '' : 'none';
    });
  });
</script>
{% endblock %}


 <!-- STOP -->
